paths:
  /api/decks:
    post:
      tags:
        - Decks
      summary: Create a new deck
      description: Create a deck with exactly 20 cards. Requires authentication.
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
                - cards
              properties:
                name:
                  type: string
                  example: "My Fire Deck"
                cards:
                  type: array
                  items:
                    type: string
                    format: uuid
                  minItems: 20
                  maxItems: 20
                  example: ["card-id-1", "card-id-2", "card-id-3", "..."]
      responses:
        '201':
          description: Deck created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Deck'
        '400':
          description: Bad request - Invalid data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              examples:
                missingFields:
                  value:
                    error: "Bad Request"
                    message: "Name and cards are required"
                invalidCardCount:
                  value:
                    error: "Bad Request"
                    message: "Deck must contain exactly 20 cards"
                invalidCards:
                  value:
                    error: "Bad Request"
                    message: "Invalid card IDs in deck"
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /api/decks/mine:
    get:
      tags:
        - Decks
      summary: Get all user's decks
      description: Retrieve all decks belonging to the authenticated user
      security:
        - bearerAuth: []
      responses:
        '200':
          description: User decks retrieved successfully
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Deck'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /api/decks/{id}:
    get:
      tags:
        - Decks
      summary: Get deck by ID
      description: Retrieve a specific deck by its ID
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
          description: Deck ID
      responses:
        '200':
          description: Deck retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Deck'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Deck not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                error: "Not Found"
                message: "Deck not found"
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

    patch:
      tags:
        - Decks
      summary: Update deck
      description: Update deck name and/or cards. If cards are updated, must provide exactly 20 card IDs.
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
          description: Deck ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: "Updated Deck Name"
                cards:
                  type: array
                  items:
                    type: string
                    format: uuid
                  minItems: 20
                  maxItems: 20
                  example: ["card-id-1", "card-id-2", "..."]
      responses:
        '200':
          description: Deck updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Deck'
        '400':
          description: Bad request - Invalid data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Deck not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

    delete:
      tags:
        - Decks
      summary: Delete deck
      description: Delete a deck permanently
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
          description: Deck ID
      responses:
        '200':
          description: Deck deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Deck deleted successfully"
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Deck not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
